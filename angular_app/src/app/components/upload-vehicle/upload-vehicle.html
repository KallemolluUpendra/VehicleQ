<div class="upload-container mt-2">
  <div class="upload-card">
    <!-- Header with title and reset button -->
    <div class="upload-header">
      <div class="d-flex align-items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="#F57F17">
          <circle cx="12" cy="12" r="3.2"/>
          <path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
        </svg>
        <h3 class="upload-title mb-0">Upload Vehicle</h3>
      </div>
      <div class="reset-btn-container">
        <button class="reset-btn" (click)="resetForm()" title="Reset form">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="white">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </button>
        <span class="reset-label">Reset</span>
      </div>
    </div>

    <!-- Image preview area -->
    <div class="image-preview-container">
      <div class="image-preview" [class.has-image]="selectedImage">
        <img *ngIf="selectedImage" [src]="selectedImage" alt="Selected vehicle" class="preview-image" />
        <div *ngIf="!selectedImage" class="no-image-placeholder">
          <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="#cccccc">
            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
          </svg>
          <p class="placeholder-text">No image selected</p>
          <p class="placeholder-hint">Choose from camera or gallery</p>
        </div>
      </div>
    </div>

    <!-- Camera and Browse buttons -->
    <div class="action-buttons">
      <button class="action-btn camera-btn" (click)="takePicture()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
          <circle cx="12" cy="13" r="4"/>
        </svg>
        <span>Camera</span>
      </button>
      <label class="action-btn gallery-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <polyline points="21 15 16 10 5 21"/>
        </svg>
        <span>Gallery</span>
        <input type="file" accept="image/*" (change)="onFileSelected($event)" class="d-none" />
      </label>
    </div>

    <!-- Form -->
    <form (ngSubmit)="uploadVehicle()">
      <div class="mb-2">
        <label for="vehicleNumber" class="form-label">Vehicle Number</label>
        <input 
          type="text" 
          id="vehicleNumber" 
          [(ngModel)]="vehicleNumber" 
          name="vehicleNumber"
          class="form-control"
          placeholder="e.g., ABC-1234"
          required
        />
      </div>

      <div class="mb-3">
        <label for="owner" class="form-label">Owner Name</label>
        <input 
          type="text" 
          id="owner" 
          [(ngModel)]="owner"
          name="owner"
          class="form-control"
          placeholder="Enter owner name"
          required
        />
      </div>

      <button 
        type="submit" 
        class="btn btn-primary w-100"
        [disabled]="isUploading || !vehicleNumber || !owner || !selectedImageFile"
      >
        <span *ngIf="!isUploading">Upload Vehicle</span>
        <span *ngIf="isUploading">
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Uploading...
        </span>
      </button>
    </form>
  </div>
</div>
