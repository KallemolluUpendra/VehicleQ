<div class="container py-3 mt-2" *ngIf="authService.currentUser | async as user">
  <div class="card shadow-sm mb-3">
    <div class="card-body text-center py-4" style="background: linear-gradient(135deg, #4A90E2 0%, #7B68EE 100%);">
      <div class="rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 80px; height: 80px; background-color: #FFFFFF; border: 2px solid #E1E8ED;">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="#4A90E2">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </div>
      <h5 class="mb-0" style="color: #FFFFFF; font-weight: 700;">{{ user.username }}</h5>
    </div>
  </div>

  <div class="card shadow-sm mb-3">
    <div class="card-body p-3">
      <h6 class="card-title mb-3">Profile Information</h6>
      
      <div class="mb-2">
        <label class="form-label fw-semibold text-muted small mb-1">USERNAME</label>
        <div>{{ user.username }}</div>
      </div>

      <hr class="my-2">

      <div class="mb-2">
        <label class="form-label fw-semibold text-muted small mb-1">EMAIL</label>
        <div>{{ user.email }}</div>
      </div>

      <hr class="my-2">

      <div class="mb-2">
        <label class="form-label fw-semibold text-muted small mb-1">FULL NAME</label>
        <input 
          *ngIf="isEditing" 
          type="text" 
          [(ngModel)]="fullName"
          class="form-control"
        />
        <div *ngIf="!isEditing">{{ user.full_name }}</div>
      </div>

      <hr class="my-2">

      <div class="mb-0">
        <label class="form-label fw-semibold text-muted small mb-1">PHONE</label>
        <input 
          *ngIf="isEditing" 
          type="tel" 
          [(ngModel)]="phone"
          class="form-control"
        />
        <div *ngIf="!isEditing">{{ user.phone }}</div>
      </div>
    </div>
  </div>

  <div class="d-grid gap-2" *ngIf="!isEditing">
    <button class="btn btn-primary" (click)="toggleEdit()">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white" class="me-1">
        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
      </svg>
      Edit Profile
    </button>
  </div>

  <div class="d-grid gap-2" *ngIf="isEditing">
    <button class="btn btn-success" (click)="updateProfile()">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white" class="me-1">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
      </svg>
      Save Changes
    </button>
    <button class="btn btn-outline-secondary" (click)="toggleEdit()">
      Cancel
    </button>
  </div>

  <div class="d-grid mt-3">
    <button class="btn btn-outline-danger" (click)="logout()">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="me-1">
        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
      </svg>
      Logout
    </button>
  </div>
</div>
